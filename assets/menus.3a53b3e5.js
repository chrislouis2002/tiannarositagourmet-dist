import{ae as s}from"./index.cb7ddad8.js";import{d as c,e as d,g as u}from"./firebase.7018ca4f.js";const l=s("menu",{state:()=>({menu:[],loading:!1,cart:[]}),getters:{cartTotal:t=>t.cart.reduce((e,a)=>e+(a.price||0)*(a.quantity||1),0),totalItems:t=>t.cart.reduce((e,a)=>e+(a.quantity||0),0),getQuantity:t=>e=>{const a=t.cart.find(r=>r.id===e);return a?a.quantity:0}},actions:{async fetchMenu(){this.loading=!0,this.menu=[];try{const t=c(d,"menu"),e=await u(t),a={};e.forEach(r=>{var o;const i=r.data(),n=((o=i.category)==null?void 0:o.trim())||"Uncategorized";a[n]||(a[n]={category:n,description:i.category_description||"",category_image:i.category_image||"",items:[]}),a[n].items.push({id:r.id,name:i.name||"Unnamed Item",price:parseFloat(i.price)||0,image:i.image||"",description:i.description||"",size:i.size||""})}),this.menu=Object.values(a),console.log("\u2705 Grouped menu loaded:",this.menu)}catch(t){console.error("\u274C Error fetching grouped menu:",t)}finally{this.loading=!1}},addToCart(t){const e=this.cart.find(a=>a.id===t.id);e?e.quantity+=1:this.cart.push({...t,quantity:1})},removeFromCart(t){this.cart=this.cart.filter(e=>e.id!==t.id)},decreaseQuantity(t){const e=this.cart.find(a=>a.id===t.id);e&&(e.quantity-=1,e.quantity<=0&&this.removeFromCart(t))},clearCart(){this.cart=[]}}});export{l as u};
