import{Q as f}from"./QItemLabel.d4104613.js";import{Q as q,a as v,b as h}from"./QList.57484bce.js";import{Q as y,a as c,f as Q,d as V,e as g,s as C}from"./firebase.7018ca4f.js";import{Q as w}from"./QBtn.1fda2045.js";import{Q as I}from"./QPage.ff4c8a0c.js";import{u as N}from"./menus.3a53b3e5.js";import{_ as S}from"./plugin-vue_export-helper.21dcd24c.js";import{G as T,m as n,y as _,z as s,j as D,t as o,q as b,$ as B,D as u,u as l,E,a1 as L,s as m,a2 as $,a3 as z}from"./index.cb7ddad8.js";import"./use-dark.d87e6965.js";const F=T({name:"CheckoutPage",setup(){const e=N(),a=D({name:"",email:"",phone:""}),p=async d=>{try{await Q(V(g,"orders"),{...d,createdAt:C()}),console.log("\u2705 Order saved to Firebase!")}catch(r){console.error("\u274C Error saving order:",r)}};return{store:e,customer:a,payWithPaystack:()=>{if(!window.PaystackPop){alert("Paystack SDK not loaded yet!");return}window.PaystackPop.setup({key:"pk_test_47389f411f78f2755503aeed9b65d7a5ca91d62f",email:a.email,amount:e.cartTotal*100,currency:"NGN",ref:""+Math.floor(Math.random()*1e9+1),metadata:{custom_fields:[{display_name:a.name,variable_name:"mobile_number",value:a.phone}]},callback:r=>{alert("Payment successful! Reference: "+r.reference);const t={customerName:a.name,customerEmail:a.email,customerPhone:a.phone,items:e.cart,total:e.cartTotal,paymentRef:r.reference,status:"paid"};p(t)},onClose:function(){alert("Transaction cancelled.")}}).openIframe()}}}}),i=e=>($("data-v-68185184"),e=e(),z(),e),M=i(()=>m("h2",{class:"text-h5 q-mb-md"},"Checkout",-1)),O=i(()=>m("h3",{class:"text-h6 q-mb-sm"},"Your Order",-1)),U={key:0},W={class:"text-right text-h6 q-mt-md"},G=i(()=>m("h3",{class:"text-h6 q-mb-sm"},"Your Details",-1));function R(e,a,p,k,d,r){return n(),_(I,{class:"q-pa-md"},{default:s(()=>[M,o(y,{class:"q-pa-md q-mb-md"},{default:s(()=>[O,o(q,{bordered:""},{default:s(()=>[(n(!0),b(L,null,B(e.store.cart,(t,P)=>(n(),_(v,{key:P},{default:s(()=>[o(h,null,{default:s(()=>[o(f,null,{default:s(()=>[u(l(t.name)+" ",1),t.size?(n(),b("span",U,"("+l(t.size)+")",1)):E("",!0)]),_:2},1024),o(f,{caption:""},{default:s(()=>[u("Qty: "+l(t.quantity),1)]),_:2},1024)]),_:2},1024),o(h,{side:""},{default:s(()=>[u(" \u20A6"+l((t.price*t.quantity).toLocaleString()),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),m("div",W," Total: \u20A6"+l(e.store.cartTotal.toLocaleString()),1)]),_:1}),o(y,{class:"q-pa-md q-mb-md"},{default:s(()=>[G,o(c,{modelValue:e.customer.name,"onUpdate:modelValue":a[0]||(a[0]=t=>e.customer.name=t),label:"Full Name",outlined:"",dense:"",class:"q-mb-sm"},null,8,["modelValue"]),o(c,{modelValue:e.customer.email,"onUpdate:modelValue":a[1]||(a[1]=t=>e.customer.email=t),label:"Email",type:"email",outlined:"",dense:"",class:"q-mb-sm"},null,8,["modelValue"]),o(c,{modelValue:e.customer.phone,"onUpdate:modelValue":a[2]||(a[2]=t=>e.customer.phone=t),label:"Phone Number",outlined:"",dense:""},null,8,["modelValue"])]),_:1}),o(w,{color:"red",label:"Pay with Paystack",class:"full-width q-py-sm",onClick:e.payWithPaystack,disable:!e.customer.name||!e.customer.email},null,8,["onClick","disable"])]),_:1})}var ee=S(F,[["render",R],["__scopeId","data-v-68185184"]]);export{ee as default};
